[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Ibis benchmarking",
    "section": "",
    "text": "A composable data system benchmark in a Python package.\nIbis is an interface, not an engine. There’s no such thing as a zero-cost abstraction with no overhead, but Ibis is designed to add as little as possible to your workloads while enabling you to scale with the best engines available. This repository is used to:\nwith a focus on the former and, currently, single-node OLAP engines."
  },
  {
    "objectID": "index.html#benchmarks",
    "href": "index.html#benchmarks",
    "title": "Ibis benchmarking",
    "section": "Benchmarks",
    "text": "Benchmarks\nSee the navbar."
  },
  {
    "objectID": "index.html#getting-started",
    "href": "index.html#getting-started",
    "title": "Ibis benchmarking",
    "section": "Getting started",
    "text": "Getting started\nYou can reproduce the benchmark easily.\n\nInstallation\n\nDeveloper setupPip install\n\n\nInstall gh and just, then:\ngh repo clone lostmygithubaccount/ibis-bench\ncd ibis-bench\njust setup\n. .venv/bin/activate\n\n\nRun:\npip install --upgrade ibis-bench\n\n\n\n\n\nUsage\nUse the CLI to run benchmarks.\nbench"
  },
  {
    "objectID": "analysis.html",
    "href": "analysis.html",
    "title": "August 2024 – ad hoc analysis",
    "section": "",
    "text": "Work in progress. DataFusion and Polars have both had new releases. DataFusion via Ibis now completes on all queries.\n\n\n\n\n\n\nVersions used\n\n\n\nVersions used in this analysis:\n\nibis-framework @ git+https://github.com/ibis-project/ibis\nduckdb==1.0.0\ndatafusion==40.1.0\npolars==1.5.0\n\n\n\n\n\n\n\n\n\nShow me the analysis code\n\n\n\n\n\n\nimport ibis\nimport gcsfs\nimport ibis.selectors as s\nimport plotly.express as px\n\nibis.options.interactive = True\nibis.options.repr.interactive.max_rows = 40\nibis.options.repr.interactive.max_length = 22\nibis.options.repr.interactive.max_columns = None\n\npx.defaults.template = \"plotly_dark\"\n\nfs = gcsfs.GCSFileSystem()\nibis.get_backend().register_filesystem(fs)\n\n\ndef get_t(floats=False):\n    t = (\n        # ibis.read_json(\"bench_logs_v2/raw_json/file_id=*.json\")\n        ibis.read_parquet(\"gs://ibis-bench/adhoc/2024-08-23/cache/file_id=*.parquet\")\n        .mutate(\n            timestamp=ibis._[\"timestamp\"].cast(\"timestamp\"),\n            instance_type=ibis.literal(\"MacBook Pro (2021 Apple M1 Max 32GB)\"),\n        )\n        .filter(ibis._[\"floats\"] == floats)\n        .distinct()\n    )\n    return t\n\n\ndef get_sfs(t):\n    sfs = sorted(t.distinct(on=\"sf\")[\"sf\"].to_pyarrow().to_pylist())\n    return sfs\n\n\ndef get_systems(t):\n    systems = sorted(t.distinct(on=\"system\")[\"system\"].to_pyarrow().to_pylist())\n    return systems\n\n\ndef get_instance_types(t):\n    instance_types = sorted(\n        t.distinct(on=\"instance_type\")[\"instance_type\"].to_pyarrow().to_pylist(),\n        key=lambda x: (x.split(\"-\")[0], int(x.split(\"-\")[-1])) if \"-\" in x else (x, 0),\n    )\n    return instance_types\n\n\ndef get_query_numbers(t):\n    query_numbers = sorted(\n        t.distinct(on=\"query_number\")[\"query_number\"].to_pyarrow().to_pylist()\n    )\n    return query_numbers\n\n\ndef get_failing_queries(t):\n    fail = t.group_by(\"system\", \"sf\", \"floats\").agg(\n        present_queries=ibis._[\"query_number\"].collect().unique().sort()\n    )\n    fail = (\n        fail.mutate(\n            failing_queries=t.distinct(on=\"query_number\")[\"query_number\"]\n            .collect()\n            .filter(lambda x: ~fail[\"present_queries\"].contains(x))\n            .sort()\n        )\n        .mutate(num_failing_queries=ibis._[\"failing_queries\"].length())\n        .drop(\"present_queries\")\n        .order_by(ibis.desc(\"sf\"), \"system\")\n    )\n    return fail\n\n\ndef get_agg(t):\n    agg = (\n        t.filter(t[\"sf\"] &gt;= 1)\n        # .filter((t[\"system\"].contains(\"duckdb\")) | (t[\"system\"].contains(\"datafusion\")))\n        .group_by(\"instance_type\", \"system\", \"sf\", \"n_partitions\", \"query_number\")\n        .agg(\n            mean_execution_seconds=t[\"execution_seconds\"].mean(),\n        )\n        .order_by(\n            ibis.asc(\"instance_type\"),\n            ibis.desc(\"sf\"),\n            ibis.asc(\"n_partitions\"),\n            ibis.asc(\"query_number\"),\n            ibis.desc(\"system\"),\n            ibis.asc(\"mean_execution_seconds\"),\n        )\n    )\n    return agg\n\n\ndef get_totals(t):\n    totals = (\n        agg.filter(agg[\"sf\"] &gt;= 1)\n        .group_by(\"system\", \"sf\")\n        .agg(total_execution_seconds=agg[\"mean_execution_seconds\"].sum())\n        .order_by(\n            ibis.desc(\"sf\"), ibis.desc(\"system\"), ibis.desc(\"total_execution_seconds\")\n        )\n    )\n    return totals\n\n\ndef get_category_orders(t):\n    category_orders = {\n        \"query_number\": sorted(\n            agg.select(\"query_number\").distinct().to_pandas()[\"query_number\"].tolist()\n        ),\n        \"system\": sorted(\n            agg.select(\"system\").distinct().to_pandas()[\"system\"].tolist()\n        ),\n        \"instance_type\": sorted(\n            agg.select(\"instance_type\")\n            .distinct()\n            .to_pandas()[\"instance_type\"]\n            .tolist(),\n            key=lambda x: (x.split(\"-\")[0], int(x.split(\"-\")[-1]))\n            if \"-\" in x\n            else (x, 0),\n        ),\n    }\n    return category_orders\n\n\ndef totals_line(totals, log_y=False):\n    px.line(\n        totals.mutate(sf=ibis._[\"sf\"].log2()),\n        x=\"sf\",\n        y=\"total_execution_seconds\",\n        color=\"system\",\n        hover_name=\"system\",\n        markers=True,\n        log_y=log_y,\n        title=\"total execution time by scale factor\",\n        labels={\"sf\": \"log2(sf)\"},\n        category_orders=category_orders,\n    ).show()\n\n\ndef queries_bar(agg, sfs, category_orders):\n    for sf in sorted(sfs):\n        c = px.bar(\n            agg.filter(agg[\"sf\"] == sf).filter(\n                agg[\"instance_type\"].lower().contains(\"macbook\")\n            ),\n            x=\"query_number\",\n            y=\"mean_execution_seconds\",\n            color=\"system\",\n            barmode=\"group\",\n            log_y=True,\n            # pattern_shape=\"instance_type\",\n            category_orders=category_orders,\n            title=f\"TPC-H scale factor {sf} (~{sf} GB in memory; ~{sf*2//5}GB on disk in Parquet) on MacBook Pro (2021 Apple M1 Max 32GB)\",\n        )\n        c.update_layout(\n            legend=dict(orientation=\"h\", yanchor=\"top\", y=1.02, xanchor=\"right\", x=1)\n        )\n        c.show()\n        print()\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\n\nPolars fails on 9/22 queries because you can’t round on decimals yet.\nWe also run with decimals converted to floats to account for this and get a comparison.\n\n\n\n\n\nt = get_t()\nt.head()\n\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━┳━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ session_id                           ┃ instance_type                        ┃ system          ┃ timestamp                  ┃ sf    ┃ n_partitions ┃ query_number ┃ execution_seconds ┃ file_type ┃ floats  ┃ file_id                                      ┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━╇━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ uuid                                 │ string                               │ string          │ timestamp                  │ int64 │ int64        │ int64        │ float64           │ string    │ boolean │ string                                       │\n├──────────────────────────────────────┼──────────────────────────────────────┼─────────────────┼────────────────────────────┼───────┼──────────────┼──────────────┼───────────────────┼───────────┼─────────┼──────────────────────────────────────────────┤\n│ ca05e319-6b56-459a-81e2-196d14173351 │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │ 2024-08-23 12:26:07.011565 │     8 │            1 │           21 │          1.123513 │ parquet   │ False   │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ ca05e319-6b56-459a-81e2-196d14173351 │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │ 2024-08-23 12:25:26.291674 │     2 │            1 │            3 │          0.156558 │ parquet   │ False   │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ ca05e319-6b56-459a-81e2-196d14173351 │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │ 2024-08-23 12:25:29.725559 │     2 │            1 │            2 │          0.085706 │ parquet   │ False   │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ ca05e319-6b56-459a-81e2-196d14173351 │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │ 2024-08-23 12:25:31.550048 │     2 │            1 │           11 │          0.064256 │ parquet   │ False   │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ ca05e319-6b56-459a-81e2-196d14173351 │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │ 2024-08-23 12:27:27.429727 │    16 │            1 │           21 │          2.468159 │ parquet   │ False   │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n└──────────────────────────────────────┴──────────────────────────────────────┴─────────────────┴────────────────────────────┴───────┴──────────────┴──────────────┴───────────────────┴───────────┴─────────┴──────────────────────────────────────────────┘\n\n\n\n\nsfs = get_sfs(t)\nsfs\n\n[1, 2, 4, 8, 16, 32, 64, 128]\n\n\n\nsystems = get_systems(t)\nsystems\n\n['ibis-datafusion', 'ibis-duckdb', 'polars-lazy']\n\n\n\ninstance_types = get_instance_types(t)\ninstance_types\n\n['MacBook Pro (2021 Apple M1 Max 32GB)']\n\n\n\nquery_numbers = get_query_numbers(t)\nquery_numbers\n\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22]\n\n\n\nfail = get_failing_queries(t)\nfail\n\n┏━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━┓\n┃ system          ┃ sf    ┃ floats  ┃ failing_queries                    ┃ num_failing_queries ┃\n┡━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━┩\n│ string          │ int64 │ boolean │ array&lt;int64&gt;                       │ int64               │\n├─────────────────┼───────┼─────────┼────────────────────────────────────┼─────────────────────┤\n│ ibis-datafusion │   128 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │   128 │ False   │ []                                 │                   0 │\n│ polars-lazy     │   128 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │    64 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │    64 │ False   │ []                                 │                   0 │\n│ polars-lazy     │    64 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │    32 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │    32 │ False   │ []                                 │                   0 │\n│ polars-lazy     │    32 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │    16 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │    16 │ False   │ []                                 │                   0 │\n│ polars-lazy     │    16 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │     8 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │     8 │ False   │ []                                 │                   0 │\n│ polars-lazy     │     8 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │     4 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │     4 │ False   │ []                                 │                   0 │\n│ polars-lazy     │     4 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │     2 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │     2 │ False   │ []                                 │                   0 │\n│ polars-lazy     │     2 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │     1 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │     1 │ False   │ []                                 │                   0 │\n│ polars-lazy     │     1 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n└─────────────────┴───────┴─────────┴────────────────────────────────────┴─────────────────────┘\n\n\n\n\nagg = get_agg(t)\nagg\n\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ instance_type                        ┃ system          ┃ sf    ┃ n_partitions ┃ query_number ┃ mean_execution_seconds ┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ string                               │ string          │ int64 │ int64        │ int64        │ float64                │\n├──────────────────────────────────────┼─────────────────┼───────┼──────────────┼──────────────┼────────────────────────┤\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            1 │             272.486370 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            1 │              11.606048 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            1 │              15.757316 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            2 │               2.347797 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            2 │               1.279553 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            2 │               1.477171 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            3 │              27.181227 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            3 │               8.333445 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            3 │               7.530144 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            4 │              11.403273 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            4 │               6.026812 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            4 │               6.528712 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            5 │              40.171489 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            5 │               8.683080 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            5 │               9.051882 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            6 │               8.230003 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            6 │               7.061977 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            6 │               4.492152 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            7 │              23.795136 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            7 │              17.664108 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            7 │              14.404383 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            8 │              10.597529 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            8 │              12.206576 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            9 │              16.954887 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            9 │             145.980012 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           10 │               9.018888 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           10 │              12.127219 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           11 │               1.597982 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           11 │               2.703022 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           12 │              12.266083 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           12 │               9.183415 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           12 │              10.053736 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           13 │              54.599441 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           13 │               6.959909 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           13 │               7.707117 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           14 │               7.155558 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           14 │               8.676409 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           15 │              12.765408 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           15 │              15.083847 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           16 │               1.555730 │\n│ …                                    │ …               │     … │            … │            … │                      … │\n└──────────────────────────────────────┴─────────────────┴───────┴──────────────┴──────────────┴────────────────────────┘\n\n\n\n\ntotals = get_totals(t)\ntotals\n\n┏━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ system          ┃ sf    ┃ total_execution_seconds ┃\n┡━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ string          │ int64 │ float64                 │\n├─────────────────┼───────┼─────────────────────────┤\n│ polars-lazy     │   128 │             1350.187780 │\n│ ibis-duckdb     │   128 │              223.264220 │\n│ ibis-datafusion │   128 │              401.521348 │\n│ polars-lazy     │    64 │              176.923297 │\n│ ibis-duckdb     │    64 │               98.655552 │\n│ ibis-datafusion │    64 │              133.822870 │\n│ polars-lazy     │    32 │               62.012707 │\n│ ibis-duckdb     │    32 │               43.631367 │\n│ ibis-datafusion │    32 │               60.327710 │\n│ polars-lazy     │    16 │               21.389563 │\n│ ibis-duckdb     │    16 │               22.242419 │\n│ ibis-datafusion │    16 │               30.334133 │\n│ polars-lazy     │     8 │                8.962351 │\n│ ibis-duckdb     │     8 │               11.322597 │\n│ ibis-datafusion │     8 │               14.689493 │\n│ polars-lazy     │     4 │                4.202529 │\n│ ibis-duckdb     │     4 │                5.948022 │\n│ ibis-datafusion │     4 │                7.150409 │\n│ polars-lazy     │     2 │                2.124277 │\n│ ibis-duckdb     │     2 │                3.491531 │\n│ ibis-datafusion │     2 │                3.933485 │\n│ polars-lazy     │     1 │                1.175853 │\n│ ibis-duckdb     │     1 │                2.304713 │\n│ ibis-datafusion │     1 │                2.529810 │\n└─────────────────┴───────┴─────────────────────────┘\n\n\n\n\ncategory_orders = get_category_orders(t)\n\n\ntotals_line(totals)\n\n                                                \n\n\n\ntotals_line(totals, log_y=True)\n\n                                                \n\n\n\nqueries_bar(agg, sfs, category_orders)\n\n                                                \n\n\n\n\n\n                                                \n\n\n\n\n\n                                                \n\n\n\n\n\n                                                \n\n\n\n\n\n                                                \n\n\n\n\n\n                                                \n\n\n\n\n\n                                                \n\n\n\n\n\n                                                \n\n\n\n\n\n\n\n\n\nt = get_t(floats=True)\nt.head()\n\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━┳━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ session_id                           ┃ instance_type                        ┃ system          ┃ timestamp                  ┃ sf    ┃ n_partitions ┃ query_number ┃ execution_seconds ┃ file_type ┃ floats  ┃ file_id                                      ┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━╇━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ uuid                                 │ string                               │ string          │ timestamp                  │ int64 │ int64        │ int64        │ float64           │ string    │ boolean │ string                                       │\n├──────────────────────────────────────┼──────────────────────────────────────┼─────────────────┼────────────────────────────┼───────┼──────────────┼──────────────┼───────────────────┼───────────┼─────────┼──────────────────────────────────────────────┤\n│ 770c123f-24cc-4f59-a19a-1bb61f50ffec │ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │ 2024-08-23 13:19:49.181828 │     8 │            1 │            2 │          0.097310 │ parquet   │ True    │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ 770c123f-24cc-4f59-a19a-1bb61f50ffec │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │ 2024-08-23 13:19:29.185799 │     8 │            1 │           15 │          0.674407 │ parquet   │ True    │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ 770c123f-24cc-4f59-a19a-1bb61f50ffec │ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │ 2024-08-23 13:19:18.902752 │     4 │            1 │           14 │          0.139224 │ parquet   │ True    │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ 770c123f-24cc-4f59-a19a-1bb61f50ffec │ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │ 2024-08-23 13:24:38.855657 │    32 │            1 │           18 │          4.310977 │ parquet   │ True    │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ 770c123f-24cc-4f59-a19a-1bb61f50ffec │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │ 2024-08-23 13:18:58.714285 │     2 │            1 │           20 │          0.200027 │ parquet   │ True    │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n└──────────────────────────────────────┴──────────────────────────────────────┴─────────────────┴────────────────────────────┴───────┴──────────────┴──────────────┴───────────────────┴───────────┴─────────┴──────────────────────────────────────────────┘\n\n\n\n\nsfs = get_sfs(t)\nsfs\n\n[1, 2, 4, 8, 16, 32, 64, 128]\n\n\n\nsystems = get_systems(t)\nsystems\n\n['ibis-datafusion', 'ibis-duckdb', 'polars-lazy']\n\n\n\ninstance_types = get_instance_types(t)\ninstance_types\n\n['MacBook Pro (2021 Apple M1 Max 32GB)']\n\n\n\nquery_numbers = get_query_numbers(t)\nquery_numbers\n\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22]\n\n\n\nfail = get_failing_queries(t)\nfail\n\n┏━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━┓\n┃ system          ┃ sf    ┃ floats  ┃ failing_queries ┃ num_failing_queries ┃\n┡━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━┩\n│ string          │ int64 │ boolean │ array&lt;int64&gt;    │ int64               │\n├─────────────────┼───────┼─────────┼─────────────────┼─────────────────────┤\n│ ibis-datafusion │   128 │ True    │ []              │                   0 │\n│ ibis-duckdb     │   128 │ True    │ []              │                   0 │\n│ polars-lazy     │   128 │ True    │ [9]             │                   1 │\n│ ibis-datafusion │    64 │ True    │ []              │                   0 │\n│ ibis-duckdb     │    64 │ True    │ []              │                   0 │\n│ polars-lazy     │    64 │ True    │ []              │                   0 │\n│ ibis-datafusion │    32 │ True    │ []              │                   0 │\n│ ibis-duckdb     │    32 │ True    │ []              │                   0 │\n│ polars-lazy     │    32 │ True    │ []              │                   0 │\n│ ibis-datafusion │    16 │ True    │ []              │                   0 │\n│ ibis-duckdb     │    16 │ True    │ []              │                   0 │\n│ polars-lazy     │    16 │ True    │ []              │                   0 │\n│ ibis-datafusion │     8 │ True    │ []              │                   0 │\n│ ibis-duckdb     │     8 │ True    │ []              │                   0 │\n│ polars-lazy     │     8 │ True    │ []              │                   0 │\n│ ibis-datafusion │     4 │ True    │ []              │                   0 │\n│ ibis-duckdb     │     4 │ True    │ []              │                   0 │\n│ polars-lazy     │     4 │ True    │ []              │                   0 │\n│ ibis-datafusion │     2 │ True    │ []              │                   0 │\n│ ibis-duckdb     │     2 │ True    │ []              │                   0 │\n│ polars-lazy     │     2 │ True    │ []              │                   0 │\n│ ibis-datafusion │     1 │ True    │ []              │                   0 │\n│ ibis-duckdb     │     1 │ True    │ []              │                   0 │\n│ polars-lazy     │     1 │ True    │ []              │                   0 │\n└─────────────────┴───────┴─────────┴─────────────────┴─────────────────────┘\n\n\n\n\nagg = get_agg(t)\nagg\n\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ instance_type                        ┃ system          ┃ sf    ┃ n_partitions ┃ query_number ┃ mean_execution_seconds ┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ string                               │ string          │ int64 │ int64        │ int64        │ float64                │\n├──────────────────────────────────────┼─────────────────┼───────┼──────────────┼──────────────┼────────────────────────┤\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            1 │             215.198010 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            1 │              14.151513 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            1 │              14.146393 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            2 │               3.867136 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            2 │               1.262599 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            2 │               1.418223 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            3 │              31.293637 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            3 │               9.681746 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            3 │               7.754292 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            4 │              13.875796 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            4 │               7.143783 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            4 │               6.379751 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            5 │              60.341715 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            5 │               9.256498 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            5 │               9.278300 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            6 │              10.330362 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            6 │               7.172419 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            6 │               5.229498 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            7 │              30.417159 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            7 │              19.057976 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            7 │              14.774110 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            8 │             103.227846 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            8 │              11.324261 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            8 │              12.952048 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            9 │              17.571991 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            9 │             266.100134 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           10 │              19.241730 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           10 │               9.889749 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           10 │              12.680748 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           11 │               4.408752 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           11 │               1.897524 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           11 │               2.610841 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           12 │              14.268959 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           12 │               9.745045 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           12 │              10.150931 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           13 │              53.542194 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           13 │               8.106897 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           13 │               7.618829 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           14 │              14.145932 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           14 │               7.723759 │\n│ …                                    │ …               │     … │            … │            … │                      … │\n└──────────────────────────────────────┴─────────────────┴───────┴──────────────┴──────────────┴────────────────────────┘\n\n\n\n\ntotals = get_totals(t)\ntotals\n\n┏━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ system          ┃ sf    ┃ total_execution_seconds ┃\n┡━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ string          │ int64 │ float64                 │\n├─────────────────┼───────┼─────────────────────────┤\n│ polars-lazy     │   128 │              878.964834 │\n│ ibis-duckdb     │   128 │              241.800632 │\n│ ibis-datafusion │   128 │             1288.898839 │\n│ polars-lazy     │    64 │              286.585091 │\n│ ibis-duckdb     │    64 │              117.745813 │\n│ ibis-datafusion │    64 │              198.591653 │\n│ polars-lazy     │    32 │               95.891511 │\n│ ibis-duckdb     │    32 │               42.395885 │\n│ ibis-datafusion │    32 │               69.521669 │\n│ polars-lazy     │    16 │               30.857167 │\n│ ibis-duckdb     │    16 │               23.126933 │\n│ ibis-datafusion │    16 │               32.212283 │\n│ polars-lazy     │     8 │               12.247739 │\n│ ibis-duckdb     │     8 │               11.877606 │\n│ ibis-datafusion │     8 │               14.541157 │\n│ polars-lazy     │     4 │                5.403272 │\n│ ibis-duckdb     │     4 │                6.427686 │\n│ ibis-datafusion │     4 │                7.547297 │\n│ polars-lazy     │     2 │                2.637706 │\n│ ibis-duckdb     │     2 │                3.704135 │\n│ ibis-datafusion │     2 │                4.143442 │\n│ polars-lazy     │     1 │                1.442963 │\n│ ibis-duckdb     │     1 │                2.649898 │\n│ ibis-datafusion │     1 │                2.859929 │\n└─────────────────┴───────┴─────────────────────────┘\n\n\n\n\ncategory_orders = get_category_orders(t)\n\n\ntotals_line(totals)\n\n                                                \n\n\n\ntotals_line(totals, log_y=True)\n\n                                                \n\n\n\nqueries_bar(agg, sfs, category_orders)"
  },
  {
    "objectID": "analysis.html#decimals-original-tpc-h-data",
    "href": "analysis.html#decimals-original-tpc-h-data",
    "title": "August 2024 – ad hoc analysis",
    "section": "",
    "text": "t = get_t()\nt.head()\n\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━┳━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ session_id                           ┃ instance_type                        ┃ system          ┃ timestamp                  ┃ sf    ┃ n_partitions ┃ query_number ┃ execution_seconds ┃ file_type ┃ floats  ┃ file_id                                      ┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━╇━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ uuid                                 │ string                               │ string          │ timestamp                  │ int64 │ int64        │ int64        │ float64           │ string    │ boolean │ string                                       │\n├──────────────────────────────────────┼──────────────────────────────────────┼─────────────────┼────────────────────────────┼───────┼──────────────┼──────────────┼───────────────────┼───────────┼─────────┼──────────────────────────────────────────────┤\n│ ca05e319-6b56-459a-81e2-196d14173351 │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │ 2024-08-23 12:26:07.011565 │     8 │            1 │           21 │          1.123513 │ parquet   │ False   │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ ca05e319-6b56-459a-81e2-196d14173351 │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │ 2024-08-23 12:25:26.291674 │     2 │            1 │            3 │          0.156558 │ parquet   │ False   │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ ca05e319-6b56-459a-81e2-196d14173351 │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │ 2024-08-23 12:25:29.725559 │     2 │            1 │            2 │          0.085706 │ parquet   │ False   │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ ca05e319-6b56-459a-81e2-196d14173351 │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │ 2024-08-23 12:25:31.550048 │     2 │            1 │           11 │          0.064256 │ parquet   │ False   │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ ca05e319-6b56-459a-81e2-196d14173351 │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │ 2024-08-23 12:27:27.429727 │    16 │            1 │           21 │          2.468159 │ parquet   │ False   │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n└──────────────────────────────────────┴──────────────────────────────────────┴─────────────────┴────────────────────────────┴───────┴──────────────┴──────────────┴───────────────────┴───────────┴─────────┴──────────────────────────────────────────────┘\n\n\n\n\nsfs = get_sfs(t)\nsfs\n\n[1, 2, 4, 8, 16, 32, 64, 128]\n\n\n\nsystems = get_systems(t)\nsystems\n\n['ibis-datafusion', 'ibis-duckdb', 'polars-lazy']\n\n\n\ninstance_types = get_instance_types(t)\ninstance_types\n\n['MacBook Pro (2021 Apple M1 Max 32GB)']\n\n\n\nquery_numbers = get_query_numbers(t)\nquery_numbers\n\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22]\n\n\n\nfail = get_failing_queries(t)\nfail\n\n┏━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━┓\n┃ system          ┃ sf    ┃ floats  ┃ failing_queries                    ┃ num_failing_queries ┃\n┡━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━┩\n│ string          │ int64 │ boolean │ array&lt;int64&gt;                       │ int64               │\n├─────────────────┼───────┼─────────┼────────────────────────────────────┼─────────────────────┤\n│ ibis-datafusion │   128 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │   128 │ False   │ []                                 │                   0 │\n│ polars-lazy     │   128 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │    64 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │    64 │ False   │ []                                 │                   0 │\n│ polars-lazy     │    64 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │    32 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │    32 │ False   │ []                                 │                   0 │\n│ polars-lazy     │    32 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │    16 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │    16 │ False   │ []                                 │                   0 │\n│ polars-lazy     │    16 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │     8 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │     8 │ False   │ []                                 │                   0 │\n│ polars-lazy     │     8 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │     4 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │     4 │ False   │ []                                 │                   0 │\n│ polars-lazy     │     4 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │     2 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │     2 │ False   │ []                                 │                   0 │\n│ polars-lazy     │     2 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n│ ibis-datafusion │     1 │ False   │ []                                 │                   0 │\n│ ibis-duckdb     │     1 │ False   │ []                                 │                   0 │\n│ polars-lazy     │     1 │ False   │ [8, 9, 10, 11, 14, 15, 17, 19, 22] │                   9 │\n└─────────────────┴───────┴─────────┴────────────────────────────────────┴─────────────────────┘\n\n\n\n\nagg = get_agg(t)\nagg\n\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ instance_type                        ┃ system          ┃ sf    ┃ n_partitions ┃ query_number ┃ mean_execution_seconds ┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ string                               │ string          │ int64 │ int64        │ int64        │ float64                │\n├──────────────────────────────────────┼─────────────────┼───────┼──────────────┼──────────────┼────────────────────────┤\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            1 │             272.486370 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            1 │              11.606048 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            1 │              15.757316 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            2 │               2.347797 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            2 │               1.279553 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            2 │               1.477171 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            3 │              27.181227 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            3 │               8.333445 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            3 │               7.530144 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            4 │              11.403273 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            4 │               6.026812 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            4 │               6.528712 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            5 │              40.171489 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            5 │               8.683080 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            5 │               9.051882 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            6 │               8.230003 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            6 │               7.061977 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            6 │               4.492152 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            7 │              23.795136 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            7 │              17.664108 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            7 │              14.404383 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            8 │              10.597529 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            8 │              12.206576 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            9 │              16.954887 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            9 │             145.980012 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           10 │               9.018888 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           10 │              12.127219 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           11 │               1.597982 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           11 │               2.703022 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           12 │              12.266083 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           12 │               9.183415 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           12 │              10.053736 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           13 │              54.599441 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           13 │               6.959909 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           13 │               7.707117 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           14 │               7.155558 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           14 │               8.676409 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           15 │              12.765408 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           15 │              15.083847 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           16 │               1.555730 │\n│ …                                    │ …               │     … │            … │            … │                      … │\n└──────────────────────────────────────┴─────────────────┴───────┴──────────────┴──────────────┴────────────────────────┘\n\n\n\n\ntotals = get_totals(t)\ntotals\n\n┏━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ system          ┃ sf    ┃ total_execution_seconds ┃\n┡━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ string          │ int64 │ float64                 │\n├─────────────────┼───────┼─────────────────────────┤\n│ polars-lazy     │   128 │             1350.187780 │\n│ ibis-duckdb     │   128 │              223.264220 │\n│ ibis-datafusion │   128 │              401.521348 │\n│ polars-lazy     │    64 │              176.923297 │\n│ ibis-duckdb     │    64 │               98.655552 │\n│ ibis-datafusion │    64 │              133.822870 │\n│ polars-lazy     │    32 │               62.012707 │\n│ ibis-duckdb     │    32 │               43.631367 │\n│ ibis-datafusion │    32 │               60.327710 │\n│ polars-lazy     │    16 │               21.389563 │\n│ ibis-duckdb     │    16 │               22.242419 │\n│ ibis-datafusion │    16 │               30.334133 │\n│ polars-lazy     │     8 │                8.962351 │\n│ ibis-duckdb     │     8 │               11.322597 │\n│ ibis-datafusion │     8 │               14.689493 │\n│ polars-lazy     │     4 │                4.202529 │\n│ ibis-duckdb     │     4 │                5.948022 │\n│ ibis-datafusion │     4 │                7.150409 │\n│ polars-lazy     │     2 │                2.124277 │\n│ ibis-duckdb     │     2 │                3.491531 │\n│ ibis-datafusion │     2 │                3.933485 │\n│ polars-lazy     │     1 │                1.175853 │\n│ ibis-duckdb     │     1 │                2.304713 │\n│ ibis-datafusion │     1 │                2.529810 │\n└─────────────────┴───────┴─────────────────────────┘\n\n\n\n\ncategory_orders = get_category_orders(t)\n\n\ntotals_line(totals)\n\n                                                \n\n\n\ntotals_line(totals, log_y=True)\n\n                                                \n\n\n\nqueries_bar(agg, sfs, category_orders)"
  },
  {
    "objectID": "analysis.html#floats-tpc-h-data-with-decimals-casted-to-floats",
    "href": "analysis.html#floats-tpc-h-data-with-decimals-casted-to-floats",
    "title": "August 2024 – ad hoc analysis",
    "section": "",
    "text": "t = get_t(floats=True)\nt.head()\n\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━┳━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ session_id                           ┃ instance_type                        ┃ system          ┃ timestamp                  ┃ sf    ┃ n_partitions ┃ query_number ┃ execution_seconds ┃ file_type ┃ floats  ┃ file_id                                      ┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━╇━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ uuid                                 │ string                               │ string          │ timestamp                  │ int64 │ int64        │ int64        │ float64           │ string    │ boolean │ string                                       │\n├──────────────────────────────────────┼──────────────────────────────────────┼─────────────────┼────────────────────────────┼───────┼──────────────┼──────────────┼───────────────────┼───────────┼─────────┼──────────────────────────────────────────────┤\n│ 770c123f-24cc-4f59-a19a-1bb61f50ffec │ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │ 2024-08-23 13:19:49.181828 │     8 │            1 │            2 │          0.097310 │ parquet   │ True    │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ 770c123f-24cc-4f59-a19a-1bb61f50ffec │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │ 2024-08-23 13:19:29.185799 │     8 │            1 │           15 │          0.674407 │ parquet   │ True    │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ 770c123f-24cc-4f59-a19a-1bb61f50ffec │ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │ 2024-08-23 13:19:18.902752 │     4 │            1 │           14 │          0.139224 │ parquet   │ True    │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ 770c123f-24cc-4f59-a19a-1bb61f50ffec │ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │ 2024-08-23 13:24:38.855657 │    32 │            1 │           18 │          4.310977 │ parquet   │ True    │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n│ 770c123f-24cc-4f59-a19a-1bb61f50ffec │ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │ 2024-08-23 13:18:58.714285 │     2 │            1 │           20 │          0.200027 │ parquet   │ True    │ 7c420182-f1a7-4631-b810-b75163ed6100.parquet │\n└──────────────────────────────────────┴──────────────────────────────────────┴─────────────────┴────────────────────────────┴───────┴──────────────┴──────────────┴───────────────────┴───────────┴─────────┴──────────────────────────────────────────────┘\n\n\n\n\nsfs = get_sfs(t)\nsfs\n\n[1, 2, 4, 8, 16, 32, 64, 128]\n\n\n\nsystems = get_systems(t)\nsystems\n\n['ibis-datafusion', 'ibis-duckdb', 'polars-lazy']\n\n\n\ninstance_types = get_instance_types(t)\ninstance_types\n\n['MacBook Pro (2021 Apple M1 Max 32GB)']\n\n\n\nquery_numbers = get_query_numbers(t)\nquery_numbers\n\n[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22]\n\n\n\nfail = get_failing_queries(t)\nfail\n\n┏━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━┓\n┃ system          ┃ sf    ┃ floats  ┃ failing_queries ┃ num_failing_queries ┃\n┡━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━┩\n│ string          │ int64 │ boolean │ array&lt;int64&gt;    │ int64               │\n├─────────────────┼───────┼─────────┼─────────────────┼─────────────────────┤\n│ ibis-datafusion │   128 │ True    │ []              │                   0 │\n│ ibis-duckdb     │   128 │ True    │ []              │                   0 │\n│ polars-lazy     │   128 │ True    │ [9]             │                   1 │\n│ ibis-datafusion │    64 │ True    │ []              │                   0 │\n│ ibis-duckdb     │    64 │ True    │ []              │                   0 │\n│ polars-lazy     │    64 │ True    │ []              │                   0 │\n│ ibis-datafusion │    32 │ True    │ []              │                   0 │\n│ ibis-duckdb     │    32 │ True    │ []              │                   0 │\n│ polars-lazy     │    32 │ True    │ []              │                   0 │\n│ ibis-datafusion │    16 │ True    │ []              │                   0 │\n│ ibis-duckdb     │    16 │ True    │ []              │                   0 │\n│ polars-lazy     │    16 │ True    │ []              │                   0 │\n│ ibis-datafusion │     8 │ True    │ []              │                   0 │\n│ ibis-duckdb     │     8 │ True    │ []              │                   0 │\n│ polars-lazy     │     8 │ True    │ []              │                   0 │\n│ ibis-datafusion │     4 │ True    │ []              │                   0 │\n│ ibis-duckdb     │     4 │ True    │ []              │                   0 │\n│ polars-lazy     │     4 │ True    │ []              │                   0 │\n│ ibis-datafusion │     2 │ True    │ []              │                   0 │\n│ ibis-duckdb     │     2 │ True    │ []              │                   0 │\n│ polars-lazy     │     2 │ True    │ []              │                   0 │\n│ ibis-datafusion │     1 │ True    │ []              │                   0 │\n│ ibis-duckdb     │     1 │ True    │ []              │                   0 │\n│ polars-lazy     │     1 │ True    │ []              │                   0 │\n└─────────────────┴───────┴─────────┴─────────────────┴─────────────────────┘\n\n\n\n\nagg = get_agg(t)\nagg\n\n┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ instance_type                        ┃ system          ┃ sf    ┃ n_partitions ┃ query_number ┃ mean_execution_seconds ┃\n┡━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ string                               │ string          │ int64 │ int64        │ int64        │ float64                │\n├──────────────────────────────────────┼─────────────────┼───────┼──────────────┼──────────────┼────────────────────────┤\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            1 │             215.198010 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            1 │              14.151513 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            1 │              14.146393 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            2 │               3.867136 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            2 │               1.262599 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            2 │               1.418223 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            3 │              31.293637 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            3 │               9.681746 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            3 │               7.754292 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            4 │              13.875796 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            4 │               7.143783 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            4 │               6.379751 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            5 │              60.341715 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            5 │               9.256498 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            5 │               9.278300 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            6 │              10.330362 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            6 │               7.172419 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            6 │               5.229498 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            7 │              30.417159 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            7 │              19.057976 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            7 │              14.774110 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │            8 │             103.227846 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            8 │              11.324261 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            8 │              12.952048 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │            9 │              17.571991 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │            9 │             266.100134 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           10 │              19.241730 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           10 │               9.889749 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           10 │              12.680748 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           11 │               4.408752 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           11 │               1.897524 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           11 │               2.610841 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           12 │              14.268959 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           12 │               9.745045 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           12 │              10.150931 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           13 │              53.542194 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           13 │               8.106897 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-datafusion │   128 │            1 │           13 │               7.618829 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ polars-lazy     │   128 │            1 │           14 │              14.145932 │\n│ MacBook Pro (2021 Apple M1 Max 32GB) │ ibis-duckdb     │   128 │            1 │           14 │               7.723759 │\n│ …                                    │ …               │     … │            … │            … │                      … │\n└──────────────────────────────────────┴─────────────────┴───────┴──────────────┴──────────────┴────────────────────────┘\n\n\n\n\ntotals = get_totals(t)\ntotals\n\n┏━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━┓\n┃ system          ┃ sf    ┃ total_execution_seconds ┃\n┡━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━┩\n│ string          │ int64 │ float64                 │\n├─────────────────┼───────┼─────────────────────────┤\n│ polars-lazy     │   128 │              878.964834 │\n│ ibis-duckdb     │   128 │              241.800632 │\n│ ibis-datafusion │   128 │             1288.898839 │\n│ polars-lazy     │    64 │              286.585091 │\n│ ibis-duckdb     │    64 │              117.745813 │\n│ ibis-datafusion │    64 │              198.591653 │\n│ polars-lazy     │    32 │               95.891511 │\n│ ibis-duckdb     │    32 │               42.395885 │\n│ ibis-datafusion │    32 │               69.521669 │\n│ polars-lazy     │    16 │               30.857167 │\n│ ibis-duckdb     │    16 │               23.126933 │\n│ ibis-datafusion │    16 │               32.212283 │\n│ polars-lazy     │     8 │               12.247739 │\n│ ibis-duckdb     │     8 │               11.877606 │\n│ ibis-datafusion │     8 │               14.541157 │\n│ polars-lazy     │     4 │                5.403272 │\n│ ibis-duckdb     │     4 │                6.427686 │\n│ ibis-datafusion │     4 │                7.547297 │\n│ polars-lazy     │     2 │                2.637706 │\n│ ibis-duckdb     │     2 │                3.704135 │\n│ ibis-datafusion │     2 │                4.143442 │\n│ polars-lazy     │     1 │                1.442963 │\n│ ibis-duckdb     │     1 │                2.649898 │\n│ ibis-datafusion │     1 │                2.859929 │\n└─────────────────┴───────┴─────────────────────────┘\n\n\n\n\ncategory_orders = get_category_orders(t)\n\n\ntotals_line(totals)\n\n                                                \n\n\n\ntotals_line(totals, log_y=True)\n\n                                                \n\n\n\nqueries_bar(agg, sfs, category_orders)"
  }
]